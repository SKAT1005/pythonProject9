
import re
import itertools

def detect_photo_request(text):
  """
  Обнаруживает запросы на отправку фотографии или показ себя в тексте.

  Args:
    text: Строка текста для анализа.

  Returns:
    True, если в тексте обнаружен запрос фотографии/показа себя, False в противном случае.
  """

  # Базовые ключевые слова и фразы
  request_verbs = ["скинь", "отправь", "покажи", "выложи", "залей", "дай", "пришли", "кинь"]
  photo_nouns = ["фотку", "фото", "фотографию", "лицо", "фейс", "аватарку", "портрет", "снимок"]
  possessive_pronouns = ["свою", "свое", "твою", "твое", "ваш", "ваше"]
  intensifiers = ["плиз", "пожалуйста", "а?", "ну"]
  question_words = ["где", "как", "когда", "есть ли"]
  seeing_verbs = ["увидеть", "посмотреть", "взглянуть"]

  # Генерация новых паттернов
  patterns = []

  # Комбинации request_verbs + photo_nouns
  for verb, noun in itertools.product(request_verbs, photo_nouns):
    patterns.append(r"|".join([
        rf"{verb}\s+{noun}",
        rf"{verb}\s+свою\s+{noun}",
        rf"{verb}\s+свое\s+{noun}",
        rf"{verb}\s+твою\s+{noun}",
        rf"{verb}\s+твое\s+{noun}",
        rf"{verb}\s+{noun}\s+плиз",
        rf"{verb}\s+{noun}\s+пожалуйста",
    ]))

  # Комбинации question_words + photo_nouns
  for question, noun in itertools.product(question_words, photo_nouns):
    patterns.append(rf"{question}\s+тво{noun}")
    patterns.append(rf"{question}\s+сво{noun}")

  # Seeing verbs + pronouns + photo nouns
  for seeing, pronoun, noun in itertools.product(seeing_verbs, possessive_pronouns, photo_nouns):
    patterns.append(rf"хочу\s+{seeing}\s+{pronoun}\s+{noun}")
    patterns.append(rf"можно\s+{seeing}\s+{pronoun}\s+{noun}")

  # Убрать дубликаты и пустые строки
  patterns = list(set(patterns))
  patterns = [p for p in patterns if p]


  # Добавляем ранее определенные паттерны (чтобы ничего не потерять)
  patterns.extend([
      r"(скинь|отправь|покажи)\s+(фот(ку|о)\s*(свою|себя)?|фотографию\s*(свою|себя)?)",
      r"(выложи|залей)\s+фот(ку|о)",
      r"можно\s+увидеть\s+(тво(е|ю)\s+фото|тебя)",
      r"хочу\s+увидеть\s+тебя",
      r"как\s+выгляд(ишь|ите)",
      r"сфоткайся",
      r"сделай\s+селфи",
      r"покажи\s+лицо",
      r"скинь\s+своё\s+лицо",
      r"отправь\s+свое\s+лицо",
      r"как\s+ты\s+выглядишь",
      r"пришли\s+своё\s+фото",
      r"отправь\s+своё\s+фото",
      r"сфоткай\s+плиз",
      r"скинь\s+фотографию\s+плиз",
      r"выложи\s+фотографию",
      r"дай\s+посмотреть\s+на\s+тебя",
      r"дай\s+свою\s+фотку",
      r"где\s+твоя\s+фотка",
      r"покажись",
      r"давай\s+твою\s+фотку",
      r"сфоткай\s+себя",
      r"покажи\s+свой\s+фейс",
      r"скинь\s+свой\s+фейс",
      r"отправь\s+свой\s+фейс",
      r"где\s+твое\s+фото",
      r"твое\s+фото\s+есть",
      r"хочу\s+твое\s+фото",
      r"ну\s+скинь\s+фотку",
      r"ждем\s+твою\s+фотку",
      r"ждем\s+твое\s+фото",
      r"отправь\s+фото",
      r"покажи\s+фото",
      r"хочу\s+увидеть\s+твое\s+лицо",
      r"можно\s+фото\s+твое",
      r"ждем\s+твое\s+фото",
      r"кинь\s+свою\s+фотку",
      r"хочу\s+посмотреть\s+на\s+твою\s+фотку",
      r"какая\s+у\s+тебя\s+ава",
  ])


  for pattern in patterns:
    if re.search(pattern, text, re.IGNORECASE):
      return True

  return False

# Расширенный список примеров использования
texts = [
    "Привет! Как дела? Скинь фотку, пожалуйста.",
    "Как ты выглядишь?",
    "Мне интересно увидеть твою фотографию.",
    "Скинь свою фотку.",
    "Ты можешь сфоткаться?",
    "Залей фотку в инсту.",
    "Просто текст без запроса.",
    "Можно увидеть тебя?",
    "Скинь своё лицо.",
    "Сфоткай плиз",
    "Дай посмотреть на тебя",
    "Где твоя фотка?",
    "Ждем твою фотку!",
    "Какая у тебя ава?",
    "Хочу посмотреть твою аватарку",
    "Где твое фото?",
    "Скинь фото плиз!",
    "Покажи свою фотку, а?",
    "Где твой портрет?",
    "Есть ли у тебя фото?",
    "Есть ли твое фото?",
    "Хочу взглянуть на твою фотку.",
    "Можно взглянуть на твою фотографию?",
    "Отправь свой снимок, пожалуйста!",
    "Кинь фотку, ну?",
    "Залей свою аватарку.",
    "Дай свой фейс посмотреть.",
    "Пришли свое фото, плиз.",
    "Выложи свое лицо.",
    "Как выглядит твой фейс?",
    "Когда покажешь свою фотографию?",
    "Где можно увидеть твою аву?",
    "Есть ли у тебя фотка?",
    "Пришли свой портрет, пожалуйста.",
    "Скинь личико) ",
    "Ну покажи свое фото!",
    "Отправь фотографию, а?",
    "Кинь свой снимок плиз",
    "Выложи фото, пожалуйста.",
    "Дай посмотреть на свой портрет.",
    "Где твоя аватарка?",
    "Покажи свое фото.",
    "Отправь фотку плиз",
    "Скинь свой фейс, ну",
    "Пришли свою фотографию а?",
    "Залей свой снимок пожалуйста.",
    "Дай посмотреть на свое лицо.",
    "Где твой фейс?",
    "Когда покажешь фотку?",
    "Есть ли у тебя снимок?",
    "Хочу посмотреть на твой портрет.",
    "Можно взглянуть на свой фейс?",
    "Отправь аву, пожалуйста.",
    "Кинь свое лицо, ну?",
    "Выложи снимок, плиз.",
    "Дай свой портрет посмотреть.",
    "Где можно увидеть твой фейс?",
    "Пришли свою фотку, пожалуйста.",
    "Скинь свое фото, плиз!",
    "Покажи свой фейс, а?",

]

for text in texts:
  if detect_photo_request(text):
    print(f"Текст: '{text}' - Обнаружен запрос фотографии/показа себя")
  else:
    print(f"Текст: '{text}' - Запрос не обнаружен")

# Распечатать все сгенерированные паттерны (для анализа и редактирования)
# print("\nВсе сгенерированные паттерны:")
# for pattern in patterns:
#    print(pattern)
